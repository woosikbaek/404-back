IoT 데이터 수집 및 실시간 관제 서버

| **구분** | **접속 주소 및 설정** | **비고** |
| --- | --- | --- |
| 🚀 | `http://localhost:5000` | REST API 기본 주소 |
| 🔌 | `ws://localhost:5000` | SocketIO 실시간 통신 주소 |
| 📡 | `mqtt://localhost:1883` | MQTT 브로커 (IoT 장비 연동) |
- **통신 설정**: `cors_allowed_origins='*'` (모든 출처 접속 허용)
- **실시간 이벤트**: 대시보드 데이터 스트리밍 및 불량 알림
- **제어 토픽**: IoT 장비 제어 및 센서 데이터 수신용 토픽 운용 (QoS: 0)

### 🔑 인증 및 보안 관리

| **방식** | **엔드포인트** | **인증** | **설명** |
| --- | --- | --- | --- |
| 📩 | `/auth/login` | ❌ | 직원 로그인 (사원번호 + 비밀번호) |
| 🔄 | `/auth/refresh` | ✅ | Access Token 갱신 |
| 👥 | `/auth/info/all` | ❌ | 전체 직원 정보 조회 |

📡 센서 품질 검사

| **방식** | **엔드포인트** | **인증** | **설명** |
| --- | --- | --- | --- |
| 📊 | `/sensor/result` (GET) | ❌ | 모든 센서 검사 결과 조회 |
| ⚠️ | `/sensor/defects` | ❌ | 센서 불량 결과만 필터링 조회 |
| 📥 | `/sensor/result` (POST) | ❌ | 신규 센서 검사 결과 추가 (소켓 알림 발생) |

📸 카메라 영상 검사

| **방식** | **엔드포인트** | **인증** | **설명** |
| --- | --- | --- | --- |
| 🎞️ | `/camera/result` (GET) | ❌ | 모든 카메라 검사 결과 조회 |
| 🚨 | `/camera/defects` | ❌ | 모든 불량 조회 (센서 + 카메라 통합) |
| 📤 | `/camera/result` (POST) | ❌ | 신규 카메라 검사 결과 추가 (이미지 포함) |
| 🖼️ | `/camera/uploads/...` | ❌ | 저장된 카메라 이미지 파일 서빙 |

🚙 차량별 불량 추적

| **방식** | **엔드포인트** | **인증** | **설명** |
| --- | --- | --- | --- |
| 🔍 | `/car/<car_id>` | ❌ | 특정 차량의 모든 불량(센서/카메라) 정보 조회 |
| 🚍 | `/car/defects` | ❌ | 불량이 감지된 모든 차량 정보 리스트 |

📈 실시간 통계 및 제어

| **방식** | **엔드포인트** | **인증** | **설명** |
| --- | --- | --- | --- |
| 📊 | `/dashboard/summary` | ❌ | 대시보드용 전체/장치별 통계 요약 |
| ⚡ | `/front/power/on` | ❌ | MQTT 기반 하드웨어 전원 켜기 제어 |
| 🔌 | `/front/power/off` | ❌ | MQTT 기반 하드웨어 전원 끄기 제어 |
| 🔘 | `/front/camera/capture` | ❌ | MQTT 기반 실시간 카메라 캡처 명령 |

🔌 실시간 이벤트 (SocketIO)

| **이벤트명** | **방향** | **설명** |
| --- | --- | --- |
| 🤝 | `connect / disconnect` | 클라이언트 연결 및 해제 관리 |
| 📈 | `stats` | 초기 연결 시 대시보드 통계 전송 |
| 🔄 | `stats_update` | 데이터 추가 시 실시간 통계 갱신 알림 |
| 🆘 | `sensor_defect` | 센서 불량 감지 시 실시간 경보 |
| 🔍 | `camera_defect` | 카메라 불량 판독 시 실시간 알림 |